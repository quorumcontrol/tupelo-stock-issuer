parcelRequire=function(modules,cache,entry,globalName){var previousRequire=typeof parcelRequire==="function"&&parcelRequire;var nodeRequire=typeof require==="function"&&require;function newRequire(name,jumped){if(!cache[name]){if(!modules[name]){var currentRequire=typeof parcelRequire==="function"&&parcelRequire;if(!jumped&&currentRequire){return currentRequire(name,true)}if(previousRequire){return previousRequire(name,true)}if(nodeRequire&&typeof name==="string"){return nodeRequire(name)}var err=new Error("Cannot find module '"+name+"'");err.code="MODULE_NOT_FOUND";throw err}localRequire.resolve=resolve;localRequire.cache={};var module=cache[name]=new newRequire.Module(name);modules[name][0].call(module.exports,localRequire,module,module.exports,this)}return cache[name].exports;function localRequire(x){return newRequire(localRequire.resolve(x))}function resolve(x){return modules[name][1][x]||x}}function Module(moduleName){this.id=moduleName;this.bundle=newRequire;this.exports={}}newRequire.isParcelRequire=true;newRequire.Module=Module;newRequire.modules=modules;newRequire.cache=cache;newRequire.parent=previousRequire;newRequire.register=function(id,exports){modules[id]=[function(require,module){module.exports=exports},{}]};var error;for(var i=0;i<entry.length;i++){try{newRequire(entry[i])}catch(e){if(!error){error=e}}}if(entry.length){var mainExports=newRequire(entry[entry.length-1]);if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=mainExports}else if(typeof define==="function"&&define.amd){define(function(){return mainExports})}else if(globalName){this[globalName]=mainExports}}parcelRequire=newRequire;if(error){throw error}return newRequire}({"DG/7":[function(require,module,exports){"use strict";const optimalFilterSize=(setLength,errorRate)=>{return Math.ceil(-(setLength*Math.log(errorRate)/Math.pow(Math.log(2),2)))};const optimalHashes=(size,setLength)=>{return Math.ceil(size/setLength*Math.log(2))};module.exports={optimalFilterSize:optimalFilterSize,optimalHashes:optimalHashes}},{}],o3Up:[function(require,module,exports){var define;(function(root,undefined){"use strict";var library={version:"3.0.1",x86:{},x64:{}};function _x86Multiply(m,n){return(m&65535)*n+(((m>>>16)*n&65535)<<16)}function _x86Rotl(m,n){return m<<n|m>>>32-n}function _x86Fmix(h){h^=h>>>16;h=_x86Multiply(h,2246822507);h^=h>>>13;h=_x86Multiply(h,3266489909);h^=h>>>16;return h}function _x64Add(m,n){m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];n=[n[0]>>>16,n[0]&65535,n[1]>>>16,n[1]&65535];var o=[0,0,0,0];o[3]+=m[3]+n[3];o[2]+=o[3]>>>16;o[3]&=65535;o[2]+=m[2]+n[2];o[1]+=o[2]>>>16;o[2]&=65535;o[1]+=m[1]+n[1];o[0]+=o[1]>>>16;o[1]&=65535;o[0]+=m[0]+n[0];o[0]&=65535;return[o[0]<<16|o[1],o[2]<<16|o[3]]}function _x64Multiply(m,n){m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];n=[n[0]>>>16,n[0]&65535,n[1]>>>16,n[1]&65535];var o=[0,0,0,0];o[3]+=m[3]*n[3];o[2]+=o[3]>>>16;o[3]&=65535;o[2]+=m[2]*n[3];o[1]+=o[2]>>>16;o[2]&=65535;o[2]+=m[3]*n[2];o[1]+=o[2]>>>16;o[2]&=65535;o[1]+=m[1]*n[3];o[0]+=o[1]>>>16;o[1]&=65535;o[1]+=m[2]*n[2];o[0]+=o[1]>>>16;o[1]&=65535;o[1]+=m[3]*n[1];o[0]+=o[1]>>>16;o[1]&=65535;o[0]+=m[0]*n[3]+m[1]*n[2]+m[2]*n[1]+m[3]*n[0];o[0]&=65535;return[o[0]<<16|o[1],o[2]<<16|o[3]]}function _x64Rotl(m,n){n%=64;if(n===32){return[m[1],m[0]]}else if(n<32){return[m[0]<<n|m[1]>>>32-n,m[1]<<n|m[0]>>>32-n]}else{n-=32;return[m[1]<<n|m[0]>>>32-n,m[0]<<n|m[1]>>>32-n]}}function _x64LeftShift(m,n){n%=64;if(n===0){return m}else if(n<32){return[m[0]<<n|m[1]>>>32-n,m[1]<<n]}else{return[m[1]<<n-32,0]}}function _x64Xor(m,n){return[m[0]^n[0],m[1]^n[1]]}function _x64Fmix(h){h=_x64Xor(h,[0,h[0]>>>1]);h=_x64Multiply(h,[4283543511,3981806797]);h=_x64Xor(h,[0,h[0]>>>1]);h=_x64Multiply(h,[3301882366,444984403]);h=_x64Xor(h,[0,h[0]>>>1]);return h}library.x86.hash32=function(key,seed){key=key||"";seed=seed||0;var remainder=key.length%4;var bytes=key.length-remainder;var h1=seed;var k1=0;var c1=3432918353;var c2=461845907;for(var i=0;i<bytes;i=i+4){k1=key.charCodeAt(i)&255|(key.charCodeAt(i+1)&255)<<8|(key.charCodeAt(i+2)&255)<<16|(key.charCodeAt(i+3)&255)<<24;k1=_x86Multiply(k1,c1);k1=_x86Rotl(k1,15);k1=_x86Multiply(k1,c2);h1^=k1;h1=_x86Rotl(h1,13);h1=_x86Multiply(h1,5)+3864292196}k1=0;switch(remainder){case 3:k1^=(key.charCodeAt(i+2)&255)<<16;case 2:k1^=(key.charCodeAt(i+1)&255)<<8;case 1:k1^=key.charCodeAt(i)&255;k1=_x86Multiply(k1,c1);k1=_x86Rotl(k1,15);k1=_x86Multiply(k1,c2);h1^=k1}h1^=key.length;h1=_x86Fmix(h1);return h1>>>0};library.x86.hash128=function(key,seed){key=key||"";seed=seed||0;var remainder=key.length%16;var bytes=key.length-remainder;var h1=seed;var h2=seed;var h3=seed;var h4=seed;var k1=0;var k2=0;var k3=0;var k4=0;var c1=597399067;var c2=2869860233;var c3=951274213;var c4=2716044179;for(var i=0;i<bytes;i=i+16){k1=key.charCodeAt(i)&255|(key.charCodeAt(i+1)&255)<<8|(key.charCodeAt(i+2)&255)<<16|(key.charCodeAt(i+3)&255)<<24;k2=key.charCodeAt(i+4)&255|(key.charCodeAt(i+5)&255)<<8|(key.charCodeAt(i+6)&255)<<16|(key.charCodeAt(i+7)&255)<<24;k3=key.charCodeAt(i+8)&255|(key.charCodeAt(i+9)&255)<<8|(key.charCodeAt(i+10)&255)<<16|(key.charCodeAt(i+11)&255)<<24;k4=key.charCodeAt(i+12)&255|(key.charCodeAt(i+13)&255)<<8|(key.charCodeAt(i+14)&255)<<16|(key.charCodeAt(i+15)&255)<<24;k1=_x86Multiply(k1,c1);k1=_x86Rotl(k1,15);k1=_x86Multiply(k1,c2);h1^=k1;h1=_x86Rotl(h1,19);h1+=h2;h1=_x86Multiply(h1,5)+1444728091;k2=_x86Multiply(k2,c2);k2=_x86Rotl(k2,16);k2=_x86Multiply(k2,c3);h2^=k2;h2=_x86Rotl(h2,17);h2+=h3;h2=_x86Multiply(h2,5)+197830471;k3=_x86Multiply(k3,c3);k3=_x86Rotl(k3,17);k3=_x86Multiply(k3,c4);h3^=k3;h3=_x86Rotl(h3,15);h3+=h4;h3=_x86Multiply(h3,5)+2530024501;k4=_x86Multiply(k4,c4);k4=_x86Rotl(k4,18);k4=_x86Multiply(k4,c1);h4^=k4;h4=_x86Rotl(h4,13);h4+=h1;h4=_x86Multiply(h4,5)+850148119}k1=0;k2=0;k3=0;k4=0;switch(remainder){case 15:k4^=key.charCodeAt(i+14)<<16;case 14:k4^=key.charCodeAt(i+13)<<8;case 13:k4^=key.charCodeAt(i+12);k4=_x86Multiply(k4,c4);k4=_x86Rotl(k4,18);k4=_x86Multiply(k4,c1);h4^=k4;case 12:k3^=key.charCodeAt(i+11)<<24;case 11:k3^=key.charCodeAt(i+10)<<16;case 10:k3^=key.charCodeAt(i+9)<<8;case 9:k3^=key.charCodeAt(i+8);k3=_x86Multiply(k3,c3);k3=_x86Rotl(k3,17);k3=_x86Multiply(k3,c4);h3^=k3;case 8:k2^=key.charCodeAt(i+7)<<24;case 7:k2^=key.charCodeAt(i+6)<<16;case 6:k2^=key.charCodeAt(i+5)<<8;case 5:k2^=key.charCodeAt(i+4);k2=_x86Multiply(k2,c2);k2=_x86Rotl(k2,16);k2=_x86Multiply(k2,c3);h2^=k2;case 4:k1^=key.charCodeAt(i+3)<<24;case 3:k1^=key.charCodeAt(i+2)<<16;case 2:k1^=key.charCodeAt(i+1)<<8;case 1:k1^=key.charCodeAt(i);k1=_x86Multiply(k1,c1);k1=_x86Rotl(k1,15);k1=_x86Multiply(k1,c2);h1^=k1}h1^=key.length;h2^=key.length;h3^=key.length;h4^=key.length;h1+=h2;h1+=h3;h1+=h4;h2+=h1;h3+=h1;h4+=h1;h1=_x86Fmix(h1);h2=_x86Fmix(h2);h3=_x86Fmix(h3);h4=_x86Fmix(h4);h1+=h2;h1+=h3;h1+=h4;h2+=h1;h3+=h1;h4+=h1;return("00000000"+(h1>>>0).toString(16)).slice(-8)+("00000000"+(h2>>>0).toString(16)).slice(-8)+("00000000"+(h3>>>0).toString(16)).slice(-8)+("00000000"+(h4>>>0).toString(16)).slice(-8)};library.x64.hash128=function(key,seed){key=key||"";seed=seed||0;var remainder=key.length%16;var bytes=key.length-remainder;var h1=[0,seed];var h2=[0,seed];var k1=[0,0];var k2=[0,0];var c1=[2277735313,289559509];var c2=[1291169091,658871167];for(var i=0;i<bytes;i=i+16){k1=[key.charCodeAt(i+4)&255|(key.charCodeAt(i+5)&255)<<8|(key.charCodeAt(i+6)&255)<<16|(key.charCodeAt(i+7)&255)<<24,key.charCodeAt(i)&255|(key.charCodeAt(i+1)&255)<<8|(key.charCodeAt(i+2)&255)<<16|(key.charCodeAt(i+3)&255)<<24];k2=[key.charCodeAt(i+12)&255|(key.charCodeAt(i+13)&255)<<8|(key.charCodeAt(i+14)&255)<<16|(key.charCodeAt(i+15)&255)<<24,key.charCodeAt(i+8)&255|(key.charCodeAt(i+9)&255)<<8|(key.charCodeAt(i+10)&255)<<16|(key.charCodeAt(i+11)&255)<<24];k1=_x64Multiply(k1,c1);k1=_x64Rotl(k1,31);k1=_x64Multiply(k1,c2);h1=_x64Xor(h1,k1);h1=_x64Rotl(h1,27);h1=_x64Add(h1,h2);h1=_x64Add(_x64Multiply(h1,[0,5]),[0,1390208809]);k2=_x64Multiply(k2,c2);k2=_x64Rotl(k2,33);k2=_x64Multiply(k2,c1);h2=_x64Xor(h2,k2);h2=_x64Rotl(h2,31);h2=_x64Add(h2,h1);h2=_x64Add(_x64Multiply(h2,[0,5]),[0,944331445])}k1=[0,0];k2=[0,0];switch(remainder){case 15:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+14)],48));case 14:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+13)],40));case 13:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+12)],32));case 12:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+11)],24));case 11:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+10)],16));case 10:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+9)],8));case 9:k2=_x64Xor(k2,[0,key.charCodeAt(i+8)]);k2=_x64Multiply(k2,c2);k2=_x64Rotl(k2,33);k2=_x64Multiply(k2,c1);h2=_x64Xor(h2,k2);case 8:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+7)],56));case 7:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+6)],48));case 6:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+5)],40));case 5:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+4)],32));case 4:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+3)],24));case 3:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+2)],16));case 2:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+1)],8));case 1:k1=_x64Xor(k1,[0,key.charCodeAt(i)]);k1=_x64Multiply(k1,c1);k1=_x64Rotl(k1,31);k1=_x64Multiply(k1,c2);h1=_x64Xor(h1,k1)}h1=_x64Xor(h1,[0,key.length]);h2=_x64Xor(h2,[0,key.length]);h1=_x64Add(h1,h2);h2=_x64Add(h2,h1);h1=_x64Fmix(h1);h2=_x64Fmix(h2);h1=_x64Add(h1,h2);h2=_x64Add(h2,h1);return("00000000"+(h1[0]>>>0).toString(16)).slice(-8)+("00000000"+(h1[1]>>>0).toString(16)).slice(-8)+("00000000"+(h2[0]>>>0).toString(16)).slice(-8)+("00000000"+(h2[1]>>>0).toString(16)).slice(-8)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=library}exports.murmurHash3=library}else if(typeof define==="function"&&define.amd){define([],function(){return library})}else{library._murmurHash3=root.murmurHash3;library.noConflict=function(){root.murmurHash3=library._murmurHash3;library._murmurHash3=undefined;library.noConflict=undefined;return library};root.murmurHash3=library}})(this)},{}],xyax:[function(require,module,exports){module.exports=require("./lib/murmurHash3js")},{"./lib/murmurHash3js":"o3Up"}],dASt:[function(require,module,exports){"use strict";const murmur=require("murmurhash3js");const allocateArray=(size,defaultValue)=>{const array=new Array(size);const getDefault=typeof defaultValue!=="function"?()=>defaultValue:defaultValue;for(let ind=0;ind<size;ind++){array[ind]=getDefault()}return array};const hashTwice=(value,asInt=false,hashFunction=null)=>{const hex=hashFunction!==null?hashFunction(value):murmur.x64.hash128(value);const firstHash=hex.substring(0,16);const secondHash=hex.substring(16);if(asInt){return{first:parseInt(firstHash,16),second:parseInt(secondHash,16)}}return{first:firstHash,second:secondHash}};const doubleHashing=(n,hashA,hashB,size)=>{return Math.abs(hashA+n*hashB)%size};const randomInt=(min,max)=>{min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min+1))+min};module.exports={allocateArray:allocateArray,hashTwice:hashTwice,doubleHashing:doubleHashing,randomInt:randomInt}},{murmurhash3js:"xyax"}],bmCt:[function(require,module,exports){"use strict";function cloneField(v){if(v===null||v===undefined){return v}if(Array.isArray(v)){return v.map(cloneField)}else if(typeof v==="object"){if("saveAsJSON"in v){return v.saveAsJSON()}return Object.assign({},v)}return v}function cloneObject(type,...fields){return function(obj){const json={type:type};fields.forEach(field=>{json[field]=cloneField(obj[field])});return json}}function assertFields(obj,...fields){return fields.every(field=>field in obj)}const BloomFilterSpecs={export:cloneObject("BloomFilter","_capacity","_errorRate","_size","_length","_nbHashes","_filter"),import:(FilterConstructor,json)=>{if(json.type!=="BloomFilter"||!assertFields(json,"_capacity","_errorRate","_size","_length","_nbHashes","_filter")){throw new Error("Cannot create a BloomFilter from a JSON export which does not represent a bloom filter")}const filter=new FilterConstructor(json._capacity,json._errorRate);filter._size=json._size;filter._nbHashes=json._nbHashes;filter._filter=json._filter.slice(0);filter._length=json._length;return filter}};const BucketSpecs={export:cloneObject("Bucket","_size","_elements"),import:(FilterConstructor,json)=>{if(json.type!=="Bucket"||!assertFields(json,"_size","_elements")){throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket")}const bucket=new FilterConstructor(json._size);json._elements.forEach((elt,i)=>{if(elt!==null){bucket._elements[i]=elt;bucket._length++}});return bucket}};const CountMinSketchSpecs={export:cloneObject("CountMinSketch","_epsilon","_delta","_matrix"),import:(FilterConstructor,json)=>{if(json.type!=="CountMinSketch"||!assertFields(json,"_epsilon","_delta","_matrix")){throw new Error("Cannot create a CountMinSketch from a JSON export which does not represent a count-min sketch")}const sketch=new FilterConstructor(json._epsilon,json._delta);sketch._matrix=json._matrix.slice();return sketch}};const CuckooFilterSpecs={export:cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter")};const PartitionedBloomFilterSpecs={export:cloneObject("PartitionedBloomFilter","_capacity","_errorRate","_length","_filter"),import:(FilterConstructor,json)=>{if(json.type!=="PartitionedBloomFilter"||!assertFields(json,"_capacity","_errorRate","_length","_filter")){throw new Error("Cannot create a PartitionedBloomFilter from a JSON export which does not represent a Partitioned Bloom Filter")}const filter=new FilterConstructor(json._capacity,json._errorRate);filter._length=json._length;filter._filter=json._filter.slice();return filter}};module.exports={BloomFilter:BloomFilterSpecs,Bucket:BucketSpecs,CountMinSketch:CountMinSketchSpecs,CuckooFilter:CuckooFilterSpecs,PartitionedBloomFilter:PartitionedBloomFilterSpecs}},{}],"9Rqp":[function(require,module,exports){"use strict";const specs=require("./export-import-specs.js");class Exportable{_registerResolver(field,resolver){this.resolvers.set(field,resolver)}saveAsJSON(){const filterType=this.constructor.name;if(!(filterType in specs)){throw new Error(`Error, a filter of type ${filterType} is not exportable nor importable.`)}return specs[filterType].export(this)}static fromJSON(json){const filterType=this.name;if(!(filterType in specs)){throw new Error(`Error, a filter of type ${filterType} is not exportable nor importable.`)}return specs[filterType].import(this,json)}}module.exports=Exportable},{"./export-import-specs.js":"bmCt"}],"9OBT":[function(require,module,exports){"use strict";const fm=require("./formulas.js");const utils=require("./utils.js");const Exportable=require("./exportable.js");class BloomFilter extends Exportable{constructor(capacity,errorRate){super();this._capacity=capacity;this._errorRate=errorRate;this._size=fm.optimalFilterSize(capacity,errorRate);this._nbHashes=fm.optimalHashes(this._size,capacity);this._filter=utils.allocateArray(this._size,0);this._length=0}static from(array,errorRate){const filter=new BloomFilter(array.length,errorRate);array.forEach(element=>filter.add(element));return filter}get capacity(){return this._capacity}get size(){return this._size}get length(){return this._length}add(element){const hashes=utils.hashTwice(element,true);for(let i=0;i<this._nbHashes;i++){this._filter[utils.doubleHashing(i,hashes.first,hashes.second,this._size)]=1}this._length++}has(element){const hashes=utils.hashTwice(element,true);for(let i=0;i<this._nbHashes;i++){if(!this._filter[utils.doubleHashing(i,hashes.first,hashes.second,this._size)]){return false}}return true}rate(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)}}module.exports=BloomFilter},{"./formulas.js":"DG/7","./utils.js":"dASt","./exportable.js":"9Rqp"}],"+5fb":[function(require,module,exports){"use strict";const fm=require("./formulas.js");const utils=require("./utils.js");const Exportable=require("./exportable.js");class PartitionedBloomFilter extends Exportable{constructor(capacity,errorRate){super();this._capacity=capacity;this._errorRate=errorRate;this._size=fm.optimalFilterSize(capacity,errorRate);this._nbHashes=fm.optimalHashes(this._size,capacity);this._subarraySize=Math.ceil(this._size/this._nbHashes);this._filter=utils.allocateArray(this._nbHashes,()=>utils.allocateArray(this._subarraySize,0));this._length=0}get capacity(){return this._capacity}get size(){return this._size}get length(){return this._length}static from(array,errorRate){const filter=new PartitionedBloomFilter(array.length,errorRate);array.forEach(element=>filter.add(element));return filter}add(element){const hashes=utils.hashTwice(element,true);for(let i=0;i<this._nbHashes;i++){this._filter[i][utils.doubleHashing(i,hashes.first,hashes.second,this._subarraySize)]=1}this._length++}has(element){const hashes=utils.hashTwice(element,true);for(let i=0;i<this._nbHashes;i++){if(!this._filter[i][utils.doubleHashing(i,hashes.first,hashes.second,this._subarraySize)]){return false}}return true}rate(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)}}module.exports=PartitionedBloomFilter},{"./formulas.js":"DG/7","./utils.js":"dASt","./exportable.js":"9Rqp"}],wJNg:[function(require,module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},{}],pc3C:[function(require,module,exports){var INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308,NAN=0/0;var symbolTag="[object Symbol]";var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value){return baseFindIndex(array,baseIsNaN,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIsNaN(value){return value!==value}var objectProto=Object.prototype;var objectToString=objectProto.toString;var nativeMax=Math.max;function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseIndexOf(array,value,index)}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=indexOf},{}],mrXw:[function(require,module,exports){"use strict";const eq=require("lodash.eq");const indexOf=require("lodash.indexof");const utils=require("./utils.js");const Exportable=require("./exportable.js");class Bucket extends Exportable{constructor(size){super();this._elements=utils.allocateArray(size,null);this._size=size;this._firstNullIndex=0;this._length=0}get size(){return this._size}get length(){return this._length}isFree(){return this._length<this._size}nextEmptySlot(){return indexOf(this._elements,null)}at(index){return this._elements[index]}add(element){if(!this.isFree())return false;this.set(this.nextEmptySlot(),element);this._length++;return true}remove(element){const index=indexOf(this._elements,element);if(index<=-1)return false;this.unset(index);return true}has(element){return indexOf(this._elements,element)>-1}set(index,element){this._elements[index]=element}unset(index){this._elements[index]=null;this._length--}swapRandom(element){const index=utils.randomInt(0,this._length-1);const tmp=this._elements[index];this._elements[index]=element;return tmp}equals(bucket){if(this._size!==bucket.size||this._length!==bucket.length)return false;return this._elements.every((elt,index)=>eq(bucket.at(index),elt))}}module.exports=Bucket},{"lodash.eq":"wJNg","lodash.indexof":"pc3C","./utils.js":"dASt","./exportable.js":"9Rqp"}],qe2Y:[function(require,module,exports){"use strict";const murmur=require("murmurhash3js");const Bucket=require("./bucket.js");const Exportable=require("./exportable.js");const utils=require("./utils.js");class CuckooFilter extends Exportable{constructor(size,fLength,bucketSize,maxKicks=1){super();this._filter=utils.allocateArray(size,()=>new Bucket(bucketSize));this._size=size;this._fingerprintLength=fLength;this._length=0;this._maxKicks=maxKicks}get size(){return this._size}get length(){return this._length}get fingerprintLength(){return this._fingerprintLength}get bucketSize(){return this._bucketSize}get maxKicks(){return this._maxKicks}static fromJSON(json){if(json.type!=="CuckooFilter"||!("_size"in json)||!("_fingerprintLength"in json)||!("_length"in json)||!("_maxKicks"in json)||!("_filter"in json)){throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter")}const filter=new CuckooFilter(json._size,json._fingerprintLength,json._bucketSize,json._maxKicks);filter._length=json._length;filter._filter=json._filter.map(json=>Bucket.fromJSON(json));return filter}add(element){const locations=this._locations(element);if(this._filter[locations.firstIndex].isFree()){this._filter[locations.firstIndex].add(locations.fingerprint)}else if(this._filter[locations.secondIndex].isFree()){this._filter[locations.secondIndex].add(locations.fingerprint)}else{let index=Math.random()<.5?locations.firstIndex:locations.secondIndex;let movedElement=locations.fingerprint;for(let nbTry=0;nbTry<this._maxKicks;nbTry++){movedElement=this._filter[index].swapRandom(movedElement);index=Math.abs(index^Math.abs(murmur.x86.hash32(movedElement)))%this._size;if(this._filter[index].isFree()){this._filter[index].add(movedElement);this._length++;return true}}return false}this._length++;return true}remove(element){const locations=this._locations(element);if(this._filter[locations.firstIndex].has(locations.fingerprint)){this._filter[locations.firstIndex].remove(locations.fingerprint);this._length--;return true}else if(this._filter[locations.secondIndex].has(locations.fingerprint)){this._filter[locations.secondIndex].remove(locations.fingerprint);this._length--;return true}return false}has(element){const locations=this._locations(element);return this._filter[locations.firstIndex].has(locations.fingerprint)||this._filter[locations.secondIndex].has(locations.fingerprint)}_computeFingerpintLength(size,rate){const length=Math.ceil(Math.log(2*size/rate))/8;if(length<=0)return 1;return length}_locations(element){const hash=murmur.x86.hash32(element);const fingerprint=hash.toString(16).substring(0,this._fingerprintLength);const firstIndex=Math.abs(hash);const secondIndex=Math.abs(firstIndex^Math.abs(murmur.x86.hash32(fingerprint)));return{fingerprint:fingerprint,firstIndex:firstIndex%this._size,secondIndex:secondIndex%this._size}}}module.exports=CuckooFilter},{murmurhash3js:"xyax","./bucket.js":"mrXw","./exportable.js":"9Rqp","./utils.js":"dASt"}],"9pJa":[function(require,module,exports){"use strict";const utils=require("./utils.js");const Exportable=require("./exportable.js");class CountMinSketch extends Exportable{constructor(epsilon,delta){super();this._epsilon=epsilon;this._delta=delta;this._columns=Math.ceil(Math.E/epsilon);this._rows=Math.ceil(Math.log(1/delta));this._matrix=utils.allocateArray(this._rows,()=>utils.allocateArray(this._columns,0))}get epsilon(){return this._epsilon}get delta(){return this._delta}update(element){const hashes=utils.hashTwice(element,true);for(let i=0;i<this._rows;i++){this._matrix[i][utils.doubleHashing(i,hashes.first,hashes.second,this._columns)]++}}count(element){let min=Infinity;const hashes=utils.hashTwice(element,true);for(let i=0;i<this._rows;i++){let v=this._matrix[i][utils.doubleHashing(i,hashes.first,hashes.second,this._columns)];min=Math.min(v,min)}return min}merge(sketch){if(this._columns!==sketch._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==sketch._rows)throw new Error("Cannot merge two sketches with different number of rows");for(let i=0;i<this._rows;i++){for(let j=0;j<this._columns;j++){this._matrix[i][j]+=sketch._matrix[i][j]}}}clone(){const sketch=new CountMinSketch(this._epsilon,this._delta);sketch.merge(this);return sketch}}module.exports=CountMinSketch},{"./utils.js":"dASt","./exportable.js":"9Rqp"}],Spug:[function(require,module,exports){"use strict";const BloomFilter=require("./src/bloom-filter.js");const PartitionedBloomFilter=require("./src/partitioned-bloom-filter.js");const CuckooFilter=require("./src/cuckoo-filter.js");const CountMinSketch=require("./src/count-min-sketch.js");module.exports={BloomFilter:BloomFilter,PartitionedBloomFilter:PartitionedBloomFilter,CuckooFilter:CuckooFilter,CountMinSketch:CountMinSketch}},{"./src/bloom-filter.js":"9OBT","./src/partitioned-bloom-filter.js":"+5fb","./src/cuckoo-filter.js":"qe2Y","./src/count-min-sketch.js":"9pJa"}],VnKd:[function(require,module,exports){var _require=require("bloom-filters"),CuckooFilter=_require.CuckooFilter;var IPFS_API_HOST="127.0.0.1";var IPFS_API_PORT="5001";var requests={};function Deferred(){var self=this;this.promise=new Promise(function(resolve,reject){self.reject=reject;self.resolve=resolve})}function generateRequestId(){var array=new Uint32Array(5);window.crypto.getRandomValues(array);var id="";array.forEach(function(v){id+=v.toString(36)});return id}function requestMessage(msg){msg.requestId=generateRequestId();requests[msg.requestId]=new Deferred;window.parent.postMessage(msg);return requests[msg.requestId].promise}function validate(data){var id=data.chain.id;var issuer=data.chain.tree.data.issuer;requestMessage({type:"get-tip",payload:{chainId:issuer}}).then(function(resp){dataUrl="http://"+IPFS_API_HOST+":"+IPFS_API_PORT+"/api/v0/dag/get?arg="+resp.payload.tip+"/tree/data";fetch(dataUrl+"/issued").then(function(resp){return resp.json()}).then(function(issued){var issuedFilter=CuckooFilter.fromJSON(issued);if(issuedFilter.has(id)){fetch(dataUrl+"/revoked").then(function(resp){return resp.json()}).then(function(revoked){var revokedFilter=CuckooFilter.fromJSON(revoked);if(!revokedFilter.has(id)){window.parent.postMessage({type:"finished",payload:{result:"ok"}})}else{window.parent.postMessage({type:"finished",payload:{result:"invalid"}})}})}else{window.parent.postMessage({type:"finished",payload:{result:"invalid"}})}})})}function handleMessage(event){data=event.data;switch(data.type){case"validate":validate(data.payload);break;case"response":if(requests.hasOwnProperty(data.requestId)){requests[data.requestId].resolve(data)}else{throw"unknown request id "+data.requestId}break;default:throw"unknown message type "+event.data.type}}window.addEventListener("message",handleMessage)},{"bloom-filters":"Spug"}]},{},["VnKd"],null);